import{j as e,L as $,r as c}from"./index-Dy-Qk1Hv.js";import{v as C}from"./vorstellungen-3f_-0A42.js";function y(l){const i="0001",s=`/assets/images/${l}/cover/`;return{big:`${s}${i}-big.webp`,medium:`${s}${i}-medium.webp`,small:`${s}${i}-small.webp`}}function W({items:l,selectedYear:i}){const s=l.length;return l.length?e.jsx(e.Fragment,{children:l.map(n=>{const a=y(n["media-folder"]),o=s===1?a?.big:a?.medium;return e.jsxs($,{to:`/vorstellungen/${n.id}`,className:"item",children:[o?e.jsx("img",{src:o,loading:"lazy",alt:n.title,className:"item-image"}):e.jsx("div",{className:"item-image",children:"Kein Bild"}),e.jsxs("div",{className:"item-text",children:[e.jsx("h3",{children:n.title}),e.jsx("p",{children:n.year})]})]},`${n.id}-${i}`)})}):e.jsx("p",{children:"Keine Ergebnisse gefunden"})}function E({years:l,selectedYear:i,setSelectedYear:s}){const n=c.useRef(null),a=c.useRef(null),[o,d]=c.useState([]),[r,u]=c.useState([]);return c.useEffect(()=>{const t=()=>{if(!n.current||!a.current)return;const x=n.current.offsetWidth,p=8,j=150,g=a.current.children,w=x-j;let v=0,m=0;for(let h=0;h<g.length;h++){const b=g[h].offsetWidth+p;if(v+b>w)break;v+=b,m++}const N=l.slice(0,m),S=l.slice(m);d(N),u(S)};t();const f=new ResizeObserver(t);return n.current&&f.observe(n.current),()=>f.disconnect()},[l]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:a,style:{position:"absolute",visibility:"hidden",whiteSpace:"nowrap",height:0,overflow:"hidden"},children:l.map(t=>e.jsx("button",{className:"year-btn",children:t},t))}),e.jsxs("div",{className:"year-grid",ref:n,children:[e.jsx("button",{onClick:()=>s(null),className:i===null?"year-btn selected":"year-btn",children:"Alle"}),o.map(t=>e.jsx("button",{onClick:()=>s(t),className:i===t?"year-btn selected":"year-btn",children:t},t)),r.length>0&&e.jsxs("select",{className:"year-select",value:i??"",onChange:t=>s(t.target.value===""?null:Number(t.target.value)),children:[e.jsx("option",{value:"",children:"Weitere Jahre"}),r.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]})}function V(){const[l,i]=c.useState(""),[s,n]=c.useState(null),a=Object.entries(C).map(([r,u])=>({id:r,...u})),o=Array.from(new Set(a.map(r=>parseInt(r.year)))).sort((r,u)=>u-r),d=a.filter(r=>r.title.toLowerCase().includes(l.toLowerCase())).filter(r=>s?parseInt(r.year)===s:!0).reverse();return e.jsxs("div",{className:"vorstellungen-page",children:[e.jsx("h1",{children:"Vorstellungen"}),e.jsx("input",{type:"text",placeholder:"Suche nach einer Vorstellung...",value:l,onChange:r=>i(r.target.value),className:"search-input"}),e.jsx(E,{years:o,selectedYear:s,setSelectedYear:n}),e.jsx("div",{className:"items-list",children:e.jsx(W,{items:d,selectedYear:s})})]})}export{V as default};
