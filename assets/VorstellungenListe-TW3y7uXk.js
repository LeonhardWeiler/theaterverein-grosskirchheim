import{j as e,L as $,r as c}from"./index-DHIycy63.js";import{v as C}from"./vorstellungen-3f_-0A42.js";function y(i){const l="0001",t=`/assets/images/${i}/cover/`;return{big:`${t}${l}-big.webp`,medium:`${t}${l}-medium.webp`,small:`${t}${l}-small.webp`}}function W({items:i,selectedYear:l}){const t=i.length;return i.length?e.jsx(e.Fragment,{children:i.map(n=>{const a=y(n["media-folder"]),o=t===1?a?.big:a?.medium;return e.jsxs($,{to:`/vorstellungen/${n.id}`,className:"item",children:[o?e.jsx("img",{src:o,loading:"lazy",alt:n.title,className:"item-image"}):e.jsx("div",{className:"item-image",children:"Kein Bild"}),e.jsxs("div",{className:"item-text",children:[e.jsx("h3",{children:n.title}),e.jsx("p",{children:n.year})]})]},`${n.id}-${l}`)})}):e.jsx("p",{children:"Keine Ergebnisse gefunden"})}function E({years:i,selectedYear:l,setSelectedYear:t}){const n=c.useRef(null),a=c.useRef(null),[o,d]=c.useState([]),[r,u]=c.useState([]);return c.useEffect(()=>{const s=()=>{if(!n.current||!a.current)return;const v=n.current.offsetWidth,p=8,j=150,f=a.current.children,w=v-j;let x=0,h=0;for(let m=0;m<f.length;m++){const b=f[m].offsetWidth+p;if(x+b>w)break;x+=b,h++}const N=i.slice(0,h),S=i.slice(h);d(N),u(S)};s();const g=new ResizeObserver(s);return n.current&&g.observe(n.current),()=>g.disconnect()},[i]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:a,style:{position:"absolute",visibility:"hidden",whiteSpace:"nowrap",height:0,overflow:"hidden"},children:i.map(s=>e.jsx("button",{className:"year-btn",children:s},s))}),e.jsxs("div",{className:"year-grid",ref:n,children:[e.jsx("button",{onClick:()=>t(null),className:l===null?"year-btn selected":"year-btn",children:"Alle"}),o.map(s=>e.jsx("button",{onClick:()=>t(s),className:l===s?"year-btn selected":"year-btn",children:s},s)),r.length>0&&e.jsxs("select",{className:"year-select",value:l??"",onChange:s=>t(s.target.value===""?null:Number(s.target.value)),children:[e.jsx("option",{value:"",children:"Weitere Jahre"}),r.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}function V(){const[i,l]=c.useState(""),[t,n]=c.useState(null),a=Object.entries(C).map(([r,u])=>({id:r,...u})),o=Array.from(new Set(a.map(r=>parseInt(r.year)))).sort((r,u)=>u-r),d=a.filter(r=>r.title.toLowerCase().startsWith(i.toLowerCase())).filter(r=>t?parseInt(r.year)===t:!0).reverse();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"site-heading full-width no-top-margin",children:[e.jsx("h1",{className:"heading-text",children:"Vorstellungen"}),e.jsx("img",{fetchPriority:"high",src:"/assets/images/2024-doener-durst-und-dosenwurst/images/0008-big.webp",alt:"Foto der Vorstellung von 2024 Döner Durst und Dosenwurst mit Schauspieler:innen auf der Bühne",className:"heading-img",loading:"eager"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Suche nach einer Vorstellung...",value:i,onChange:r=>l(r.target.value),className:"search-input"}),e.jsx(E,{years:o,selectedYear:t,setSelectedYear:n})]}),e.jsx("div",{className:"items-list",children:e.jsx(W,{items:d,selectedYear:t})})]})}export{V as default};
